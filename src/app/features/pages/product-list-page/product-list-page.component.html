<app-navbar />

<main class="product-list-page">
  <aside class="filters">
    <app-sidebar-filters (selectedFilter)="onSelectFilter($event)" />
  </aside>

  <app-sidebar
    themeSidebar="light"
    [openSidebar]="stateSidebar()"
    (closeSidebar)="stateSidebar.set(false)"
  >
    <app-sidebar-filters
      (selectedFilter)="onSelectFilter($event)"
      sidebar-content
    />
  </app-sidebar>

  <div class="content">
    <app-breadcrumb />

    <div class="content__header">
      <h1>Productos ({{ products().length }})</h1>
      <app-button
        type="iconText"
        icon="filters.svg"
        text="Filtros"
        (onClick)="toggleSidebar()"
      />
    </div>

    <div class="content__boxs">
      <app-search-input
        (searchText)="onSearchText($event)"
        [defaultValue]="query()"
      />
      <div class="content__filters">
        @for(special of filters().special; track special){
        <app-box-button
          [text]="special.label"
          [sizeControl]="sizeControl.MEDIUM"
          [typeControl]="typeControl.BUTTON"
          [checked]="isActiveFilter('especial', special.value)"
          (onClick)="
            onSelectFilter({
              label: 'especial',
              value: special.value
            })
          "
        />
        }
      </div>
    </div>
    <div class="content__results" [class.notfound]="products().length === 0">
      @if(products().length === 0){
      <h1>No se encontraron productos</h1>
      } @else { @for(product of products(); track product){
      <app-product
        [product]="product"
        [showColorDots]="true"
        (onClick)="redirectToDetail(product.id)"
      />
      } }
    </div>
  </div>
</main>

<app-footer />
